{% extends 'main/base.html' %}

{% block content %}
<h3>
  {% if user.is_authenticated %}
  {{ user.division }}
  {{ user.get_full_name }} さんの記録
  {% endif %}
</h3>
<div class="row>
  <small class="text-muted">
    <ul>
      <li>二ヶ月以上前の記録は、管理者によって削除されることがあります。（たぶん）</li>
      <li>まとめて退出された記録には * が付いています。</li>
    </ul>
  </small>
</div>

<div class="row my-4">
  {% if is_paginated %}
  {% load paginator_tags %}
  <nav aria-label="Page navigation">
    <ul class="pagination">
      {% with obj=page_obj paginator=page_obj.paginator %}
      {% if obj.has_previous %}
      <li class="page-item">
	<a class="page-link" href="{% url 'main:log' 1 %}">
	  最初&lt;&lt; </a></li>
      <li class="page-item">
	<a class="page-link"
	   href="{% url 'main:log' obj.previous_page_number %}">
	  戻る&lt;</a></li>
      {% else %}
      <li class="page-item disabled">
	<span class="page-link">
	  最初&lt;&lt; </span></li>
      <li class="page-item disabled">
	<span class="page-link">
	  戻る&lt;</span></li>
      {% endif %}

      {% get_proper_elided_page_range obj 2 2 as page_range %}
      {% for i in page_range %}
      {% if obj.number == i %}
      <li class="page-item active">
	<span class="page-link">{{ i }}</span></li>
      {% elif paginator.ELLIPSIS == i %}
      <li class="page-item">
	<span class="page-link">{{ i }}</span></li>
      {% else %}
      <li class="page-item">
	<a class="page-link" href="{% url 'main:log' i %}">{{ i }}</a></li>
      {% endif %}
      {% endfor %}

      {% if obj.has_next %}
      <li class="page-item">
	<a class="page-link" href="{% url 'main:log' obj.next_page_number %}">
	  &gt;次へ</a></li>
      <li class="page-item">
	<a class="page-link" href="{% url 'main:log' paginator.num_pages %}">
	  &gt;&gt;最後</a></li>
      {% else %}
      <li class="page-item disabled">
	<span class="page-link">
	  &gt;次へ</span></li>
      <li class="page-item disabled">
	<span class="page-link">
	  &gt;&gt;最後</span></li>
      {% endif %}
      {% endwith %}
    </ul>
  </nav>
  <div class="w-100"></div>
  {% endif %}

  <div class="col-12 col-md-8 col-lg-6">
    <table class="table table-sm">
      <thead>
	<tr>
	  <td scope="col" class="px-2 text-nowrap">日時</td>
	  <td scope="col" class="px-2 text-nowrap">内奥</td>
	</tr>
      </thead>
      <tbody>
	{% for q in object_list %}
	<tr>
	  <td scope="row" class="px-2 text-nowrap">
	    {{q.create_at|date:"Y/n/j G:i:s"}}</td>
	  <td scope="row" class="px-2 text-nowrap">
	    {{q.message}}</td>
	</tr>
	{% empty %}
	<tr><td class="row">(まだありません)</td><td></td></tr>
	{% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
